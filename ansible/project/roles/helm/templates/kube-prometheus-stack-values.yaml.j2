prometheus:
  prometheusSpec:
    serviceMonitorSelectorNilUsesHelmValues: false
    externalLabels:
      deployment_ts: "{{ deployment_ts }}"
    remoteWrite:
      - url: http://victoria-metrics-single-server.monitoring.svc.cluster.local:8428/api/v1/write
    additionalServiceMonitors:
      - name: Scaphandre
        jobLabel: scaphandre
        selector:
          matchExpressions:
            - key: app.kubernetes.io/name
              operator: In
              values:
                - scaphandre
          endpoints:
            - port: metrics
              interval: 5s
    nodeSelector: 
      node-role.kubernetes.io/control-plane: "true"
prometheusOperator:
  nodeSelector: 
    node-role.kubernetes.io/control-plane: "true"
alertmanager:
  alertmanagerSpec:
    nodeSelector:
      node-role.kubernetes.io/control-plane: "true"
kube-state-metrics:
  nodeSelector: 
    node-role.kubernetes.io/control-plane: "true"
grafana:
  # Grafana is Disabled now as metrics are stored on another analysis server
  enabled: false
  grafana.ini:
    auth.anonymous:
      enabled: true
      org_role: Admin
  sidecar:
    datasources:
      enabled: false
      defaultDatasourceEnabled: false
      # uid: prometheus
      # url: http://victoria-metrics-single-server.monitoring.svc.cluster.local:8428/
  datasources:
    datsources.yaml:
      apiVersion: 1
      datasources:
        - name: VictoriaMetrics
          type: prometheus
          url: http://victoria-metrics-single-server.monitoring.svc.cluster.local:8428/
          access: proxy
          isDefault: true
  persistence:
    type: pvc
    enabled: true
    existingClaim: grafana-pvc
  initChownData:
    ## If false, data ownership will not be reset at startup
    ## This allows the prometheus-server to be run with an arbitrary user
    ##
    enabled: false
